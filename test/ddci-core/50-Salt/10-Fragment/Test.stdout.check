-- Check for fragment violations.
-- The errors come from the Salt -> C or Salt -> LLVM conversion.
ok
ok


-- Error: Unknown primop.
When checking expression.
  Undefined variable: foo#


-- Error: Module does not have a top-level letrec.
Fragment violation when converting Salt module to C code.
  Module does not have a top-level letrec.
  


-- Ok: Function finishes with a return statement.
int_t foo (int_t x)
{
        return x;
}



-- Ok: Statements in function.
int_t foo (int_t x)
{
        int_t y          = (x + x);
        return y;
}



-- Ok: Function explicitly fails.
int_t foo (int_t x)
{
        int_t y          = (x + x);
        _fail();
}



-- Ok: assignment between variables.
int_t foo (int_t x)
{
        int_t y          = x;
        return y;
}



-- Ok: assignment from a literal.
nat_t foo (nat_t x)
{
        nat_t y          = 5;
        return y;
}



-- Error: assignment from primop.
Error loading module
  During fragment compliance check.
    Unsupported feature: PartialPrims


-- Error: cannot discard non-void return value.
Fragment violation when converting Salt module to C code.
  Cannot discard non-void return value.
  
  with: let _ : Int# = x in
        return# [Int#] x

