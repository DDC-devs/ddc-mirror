
:set lang Flow

-- Simple fold over a vector
:flow-rate..
module Test with letrec
test    (u1 : Vector# Int#)
        : Int#
 =      vreduce# [Int#] (add# [Int#]) 0i# u1
;;


-- Two folds over same vector
:flow-rate..
module Test with letrec
test    (u1 : Vector# Int#)
        : Int#
 =      add# [Int#] (vreduce# [Int#] (add# [Int#]) 0i# u1) (vreduce# [Int#] (mul# [Int#]) 1i# u1)
;;


