:set SuppressLetTypes
:set lang Flow

:load..
module Test with letrec
repsme  [k1 : Rate]
        (lens : Series# k1 Nat#)
        (s1   : Series# k1 Float32#)
        (v    : Vector# Float32#)
        : Process#
 = smkSegd# [k1] lens
   (/\(k2 : Rate). \(segd : Segd# k1 k2). 
     let s2 = sreps# [k1] [k2] [Float32#] segd s1 in
     let s3 = smap#  [k2] [Float32#] [Float32#] (mul# [Float32#] 2.0f32#) s2 
     in  sfill# [k2] [Float32#] v s3)
;;


