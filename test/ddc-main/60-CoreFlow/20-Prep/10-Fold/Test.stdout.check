
ok

-- Two folds over the same input series.
module Test with
letrec {
  test : [k : Rate].Ref# Int# -> Ref# Int# -> Series# k Int# -> Process#
    = /\(k : Rate).
       \(u1 u2 : Ref# Int#).\(elems : Series# k Int#).
      let x3 : Process#
            = sreduce# [k] [Int#] u1
                  (\(x0 x1 : Int#). add# [Int#] x0 x1) 0i# elems in
      let x7 : Process#
            = sreduce# [k] [Int#] u2
                  (\(x4 x5 : Int#). mul# [Int#] x4 x5) 1i# elems in
      let x8 : Process# = pjoin# x3 x7 in
      x8
}

