
module System.IO.File
export
{       file_read
}
import Data.Text
import System.IO.Console
import System.Posix.Stdlib


import foreign c value
 primFileRead   : Nat# -> Vector# RegionText Word8#
 ddcVectorGuts : {@r: Region} -> Vector# r Word8 -> Nat#

where


-- | TODO: wrap code to get the flat vector for FFI in a nicer way.
file_read (tx: Text): S File Text
 = box weakeff File in
   TextVec $ primFileRead (ddcVectorGuts (textVectorOfText tx))

